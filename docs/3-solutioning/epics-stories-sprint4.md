# Epics & User Stories: Cyber-Red (Sprint 4 Expansion)

**Version:** 1.1
**Date:** 2025-12-16
**Status:** Approved

## Epic 5: Natural Language Command Interface (NLP-CMD)
**Goal:** Allow operators to control the swarm using plain English via the TUI.

*   **Story NLP-01: TUI Chat Input**
    *   **As a:** Operator
    *   **I want to:** Type "Scan 192.168.1.5 for web vulns" into a text box in the TUI.
    *   **Acceptance Criteria:**
        *   TUI has an Input Widget (bottom of screen).
        *   Input is sent to `Council.parse_intent()`.

*   **Story NLP-02: Intent Parser (The Dispatcher)**
    *   **As a:** System
    *   **I want to:** Convert "Scan 192.168.1.5" into structured JSON: `{"target": "192.168.1.5", "action": "scan", "scope": "web"}`.
    *   **Acceptance Criteria:**
        *   Implement `Council.parse_intent(text) -> dict` using Llama 3.1 70B.
        *   Updates `EventBus` with new target.

## Epic 6: The Full Arsenal (Omni-Tool)
**Goal:** Enable the AI to use ANY tool installed in Kali Linux, not just the hardcoded adapters.

*   **Story OMNI-01: Generic Tool Adapter**
    *   **As a:** Developer
    *   **I want to:** Execute any command string generated by the Coder model.
    *   **Acceptance Criteria:**
        *   Create `src/mcp/generic_adapter.py`.
        *   It accepts a raw command string (e.g., `nikto -h 10.0.0.1`).
        *   It executes it in the Worker Pool.
        *   It returns the raw stdout.

*   **Story OMNI-02: Dynamic Tool Selection**
    *   **As a:** System
    *   **I want to:** Let the Strategist choose the tool, not the Python code.
    *   **Acceptance Criteria:**
        *   Update `Council.decide_attack` to allow the Strategist to output `{"tool": "sqlmap", ...}`.
        *   Coder generates the specific syntax for that tool.

## Epic 7: Advanced E2E Testing (The Gauntlet)
**Goal:** Strict, reliable end-to-end testing.

*   **Story TEST-01: Robust Healthchecks**
    *   **As a:** Tester
    *   **I want to:** Ensure tests never run against a booting container.
    *   **Acceptance Criteria:**
        *   Implement `wait_for_health(container_name)` utility in Python.
        *   Replace `sleep(5)` loops with health polling.

*   **Story TEST-02: Web Vulnerability Test**
    *   **As a:** Tester
    *   **I want to:** Verify the system can exploit a Web SQLi.
    *   **Acceptance Criteria:**
        *   Add `dvwa` (Damn Vulnerable Web App) to Docker Compose.
        *   Write `tests/test_web_exploit.py`.
